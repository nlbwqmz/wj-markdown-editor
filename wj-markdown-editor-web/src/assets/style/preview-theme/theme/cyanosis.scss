.preview-theme-cyanosis {
  $monospace-font: Menlo, Monaco, Consolas, 'Courier New', monospace;
  $line-space: 16px;
  $id: '--cyanosis';

  $l-baseColor: #353535;
  $l-titleColor: #005bb7;
  $l-strongColor: #2196f3;
  $l-emColor: #4fc3f7;
  $l-delColor: #ccc;
  $l-linkColor: #3da8f5;
  $l-linkhColor: #007fff;
  $l-borderColor: #bedcff;
  $l-borderColor2: #ececec;
  $l-bgColor: #fff;
  $l-blockquoteColor: #8c8c8c;
  $l-blockquoteBgColor: #f0fdff;
  $l-codeColor: #c2185b;
  $l-codeBgColor: #fff4f4;
  $l-codePreColor: #f8f8f8;
  $l-tableBorderColor: #c3e0fd;
  $l-tableThColor: #dff0ff;
  $l-tableThtColor: $l-titleColor;
  $l-tableTrNcColor: #f7fbff;
  $l-tableTrhColor: #e0edf7;
  $l-selectionTextColor: #c80000;
  $l-selectionBgColor: rgba(175, 207, 247, 0.25);
  $l-selectionTitleColor: $l-titleColor;
  $l-selectionTitlebgColor: $l-selectionBgColor;
  $l-selectionDelColor: #999;
  $l-selectionElBgColor: #e8ebec;
  $l-selectionCodeBgColor: #ffeaeb;
  $l-selectionPreCodeBgColor: rgba(160, 200, 255, 0.25);

  $d-baseColor: #cacaca;
  $d-titleColor: #ddd;
  $d-strongColor: #fe9900;
  $d-emColor: #ffd28e;
  $d-delColor: #ccc;
  $d-linkColor: #ffb648;
  $d-linkhColor: $d-strongColor;
  $d-borderColor: #ffe3ba;
  $d-borderColor2: #ffcb7b;
  $d-bgColor: #2f2f2f;
  $d-blockquoteColor: #c7c7c7;
  $d-blockquoteBgColor: rgba(255, 199, 116, 0.1);
  $d-codeColor: #000;
  $d-codeBgColor: $d-borderColor2;
  $d-codePreColor: rgba(255, 227, 185, 0.5);
  $d-tableBorderColor: $d-strongColor;
  $d-tableThColor: $d-linkColor;
  $d-tableThtColor: $d-codeColor;
  $d-tableTrNcColor: #6d5736;
  $d-tableTrhColor: #947443;
  $d-selectionTextColor: #00c888;
  $d-selectionBgColor: rgba(175, 207, 247, 0.25);
  $d-selectionTitleColor: $d-codeColor;
  $d-selectionTitlebgColor: $d-strongColor;
  $d-selectionDelColor: #999;
  $d-selectionElBgColor: $d-codeColor;
  $d-selectionCodeBgColor: $d-borderColor2;
  $d-selectionPreCodeBgColor: rgba(160, 200, 255, 0.25);

  @mixin LightAndDark($isDark: false) {
    #{$id}-base-color: if(sass($isDark): $d-baseColor; else: $l-baseColor);
    #{$id}-title-color: if(sass($isDark): $d-titleColor; else: $l-titleColor);
    #{$id}-strong-color: if(sass($isDark): $d-strongColor; else: $l-strongColor);
    #{$id}-em-color: if(sass($isDark): $d-emColor; else: $l-emColor);
    #{$id}-del-color: if(sass($isDark): $d-delColor; else: $l-delColor);
    #{$id}-link-color: if(sass($isDark): $d-linkColor; else: $l-linkColor);
    #{$id}-linkh-color: if(sass($isDark): $d-linkhColor; else: $l-linkhColor);
    #{$id}-border-color: if(sass($isDark): $d-borderColor; else: $l-borderColor);
    #{$id}-border-color-2: if(sass($isDark): $d-borderColor2; else: $l-borderColor2);
    #{$id}-bg-color: if(sass($isDark): $d-bgColor; else: $l-bgColor);
    #{$id}-blockquote-color: if(sass($isDark): $d-blockquoteColor; else: $l-blockquoteColor);
    #{$id}-blockquote-bg-color: if(sass($isDark): $d-blockquoteBgColor; else: $l-blockquoteBgColor);
    #{$id}-code-color: if(sass($isDark): $d-codeColor; else: $l-codeColor);
    #{$id}-code-bg-color: if(sass($isDark): $d-codeBgColor; else: $l-codeBgColor);
    #{$id}-code-pre-color: if(sass($isDark): $d-codePreColor; else: $l-codePreColor);
    #{$id}-table-border-color: if(sass($isDark): $d-tableBorderColor; else: $l-tableBorderColor);
    #{$id}-table-th-color: if(sass($isDark): $d-tableThColor; else: $l-tableThColor);
    #{$id}-table-tht-color: if(sass($isDark): $d-tableThtColor; else: $l-tableThtColor);
    #{$id}-table-tr-nc-color: if(sass($isDark): $d-tableTrNcColor; else: $l-tableTrNcColor);
    #{$id}-table-trh-color: if(sass($isDark): $d-tableTrhColor; else: $l-tableTrhColor);
    #{$id}-slct-title-color: if(sass($isDark): $d-selectionTitleColor; else: $l-selectionTitleColor);
    #{$id}-slct-titlebg-color: if(sass($isDark): $d-selectionTitlebgColor; else: $l-selectionTitlebgColor);
    #{$id}-slct-text-color: if(sass($isDark): $d-selectionTextColor; else: $l-selectionTextColor);
    #{$id}-slct-bg-color: if(sass($isDark): $d-selectionBgColor; else: $l-selectionBgColor);
    #{$id}-slct-del-color: if(sass($isDark): $d-selectionDelColor; else: $l-selectionDelColor);
    #{$id}-slct-elbg-color: if(sass($isDark): $d-selectionElBgColor; else: $l-selectionElBgColor);
    #{$id}-slct-codebg-color: if(sass($isDark): $d-selectionCodeBgColor; else: $l-selectionCodeBgColor);
    #{$id}-slct-prebg-color: if(sass($isDark): $d-selectionPreCodeBgColor; else: $l-selectionPreCodeBgColor);
  }

  @mixin transitionColor() {
    transition: color 0.35s;
  }

  @mixin headTitle($padb: 4px, $fontSize: 24px, $mtop: 36px) {
    padding-bottom: $padb;
    margin-top: $mtop;
    margin-bottom: 10px;
    font-size: $fontSize;
    line-height: 1.5;
    color: var(--cyanosis-title-color);
  }

  @mixin blockquoteColor {
    color: var(--cyanosis-blockquote-color);
    border-left: 4px solid var(--cyanosis-strong-color);
    background-color: var(--cyanosis-blockquote-bg-color);
  }

  @mixin selectionColor($bgColor: '', $txtColor: '') {
    @if $bgColor != '' {
      background-color: var($bgColor);
    }
    @if $txtColor != '' {
      color: var($txtColor);
    }
  }

  word-break: break-word;
  line-height: 1.75;
  font-weight: 400;
  font-size: 14px;
  overflow-x: hidden;
  color: var(--cyanosis-base-color);
  @include transitionColor();
  @include LightAndDark();

  @at-root [theme='dark'] & {
    @include LightAndDark(true);
  }

  h1 {
    @include headTitle(4px, 30px);
    @include transitionColor();
  }

  h2 {
    position: relative;
    padding-left: 10px;
    padding-right: 10px;
    @include headTitle(10px, 24px);
    border-bottom: 1px solid var(--cyanosis-border-color-2);
    @include transitionColor();

    &::before {
      content: '「';
      position: absolute;
      top: -6px;
      left: -14px;
    }

    &::after {
      content: '」';
      position: relative;
      top: 6px;
      right: auto;
    }
  }

  h3 {
    position: relative;
    @include headTitle(0, 20px, 30px);
    padding-left: 6px;
    @include transitionColor();

    &::before {
      content: '»';
      padding-right: 6px;
      color: var(--cyanosis-strong-color);
    }
  }

  h4 {
    @include headTitle(0, 16px, 24px);
    padding-left: 6px;
    @include transitionColor();
  }

  h5 {
    @include headTitle(0, 14px, 18px);
    padding-left: 6px;
    @include transitionColor();
  }

  h6 {
    @include headTitle(0, 12px, 12px);
    padding-left: 6px;
    @include transitionColor();
  }

  p {
    line-height: inherit;
    margin-top: $line-space;
    margin-bottom: $line-space;
  }

  img {
    max-width: 100%;
    box-shadow: var(--img-box-shadow);
  }

  hr {
    position: relative;
    width: 98%;
    height: 1px;
    margin-top: 32px;
    margin-bottom: 32px;
    background-image: linear-gradient(
      90deg,
      var(--cyanosis-link-color),
      rgba(255, 0, 0, 0.3),
      rgba(255, 255, 255, 0.1),
      rgba(255, 0, 0, 0.3),
      var(--cyanosis-link-color)
    );
    border-width: 0;
    overflow: visible;

    //&::after {
    //  content: "";
    //  position: absolute;
    //  margin: auto;
    //  left: 0;
    //  right: 0;
    //  bottom: 0;
    //  top: 0;
    //  display: inline-block;
    //  width: 60px;
    //  height: 20px;
    //  background-color: var(--cyanosis-bg-color);
    //  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);
    //  background-repeat: no-repeat;
    //  background-size: auto 100%;
    //  background-position-x: center;
    //  transition: background-color 0.5s;
    //}
  }

  code {
    padding: 0.065em 0.4em;
    font-size: 0.9em;
    word-break: break-word;
    overflow-x: auto;
    border-radius: 2px;
    color: var(--cyanosis-code-color);
    background-color: var(--cyanosis-code-bg-color);
    box-decoration-break: clone;
  }

  pre {
    overflow: auto;
    position: relative;
    line-height: 1.75;
    > code {
      color: inherit;
      background-color: inherit;
      display: block;
      padding: 1.2rem;
      margin: 0;
      font-size: 14px;
      word-break: normal;
      overflow-x: auto;
      &::-webkit-scrollbar {
        width: 4px;
        height: 4px;
      }
      &::-webkit-scrollbar-track {
        background-color: var(--cyanosis-border-color);
      }

      &::-webkit-scrollbar-thumb {
        background-color: var(--cyanosis-strong-color);
        border-radius: 10px;
      }
    }
  }

  pre:not(.hljs) {
    background: var(--cyanosis-code-pre-color);
    > code {
      color: #333;
      background: var(--cyanosis-code-pre-color);
    }
  }

  a {
    position: relative;
    text-decoration: none;
    color: var(--cyanosis-link-color);
    border-bottom: 1px solid var(--cyanosis-border-color);

    &:hover {
      color: var(--cyanosis-linkh-color);
      border-bottom-color: var(--cyanosis-linkh-color);
    }

    &:active {
      color: var(--cyanosis-linkh-color);
    }

    &::after {
      position: absolute;
      content: '';
      top: 100%;
      left: 0;
      width: 100%;
      opacity: 0;
      border-bottom: 1px solid var(--cyanosis-border-color);
      transition:
        top 0.3s,
        opacity 0.3s;
      transform: translate3d(0, 0, 0);
    }

    &:hover::after {
      top: 0;
      opacity: 1;
      border-bottom-color: var(--cyanosis-linkh-color);
    }
  }

  table {
    display: inline-block !important;
    font-size: 14px;
    width: auto;
    max-width: 100%;
    overflow: auto;
    border: 1px solid var(--cyanosis-table-border-color);
    border-spacing: 0;
    border-collapse: collapse;

    thead {
      color: #000;
      text-align: left;
      font-size: 16px;
      background: #f6f6f6;
    }

    tr:nth-child(2n) {
      background-color: var(--cyanosis-table-tr-nc-color);
    }

    tr:hover {
      background-color: var(--cyanosis-table-trh-color);
    }

    th,
    td {
      padding: 12px 8px;
      line-height: 24px;
      border: 1px solid var(--cyanosis-table-border-color);
    }

    th {
      color: var(--cyanosis-table-tht-color);
      background-color: var(--cyanosis-table-th-color);
    }

    td {
      min-width: 120px;
    }
  }

  blockquote {
    @include blockquoteColor;
    padding: 1px 20px;
    margin: 22px 0;
    @include transitionColor();

    &::after {
      display: block;
      content: '';
    }

    & > p {
      margin: 10px 0;
    }

    & > b,
    & > strong {
      color: var(--cyanosis-strong-color);
    }
  }

  b,
  strong {
    color: var(--cyanosis-strong-color);
  }

  i,
  em {
    color: var(--cyanosis-em-color);
  }

  del {
    color: var(--cyanosis-del-color);
  }

  ol,
  ul {
    padding-left: 28px;

    li {
      margin-bottom: 0;
      list-style: inherit;

      & .task-list-item {
        list-style: none;

        ul,
        ol {
          margin-top: 0;
        }
      }
    }

    ul,
    ol {
      margin-top: 4px;
    }
  }

  ol li {
    padding-left: 6px;
  }

  // details & summary
  details {
    & > summary {
      outline: none;
      font-size: 20px;
      font-weight: bolder;
      cursor: pointer;
    }

    & > p {
      padding: 10px 20px;
      margin: 10px 0 0;
      color: #666;
      background-color: var(--cyanosis-blockquote-bg-color);
      border: 2px dashed var(--cyanosis-strong-color);
    }
  }

  // selection
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    &::selection {
      @include selectionColor();
      color: var(--cyanosis-slct-title-color);
      background-color: var(--cyanosis-slct-titlebg-color);
    }
  }

  p,
  ol li,
  ul li {
    &::selection {
      color: var(--cyanosis-slct-text-color);
      background-color: var(--cyanosis-slct-bg-color);
    }
  }

  a,
  b,
  strong,
  i,
  em {
    &::selection {
      background-color: var(--cyanosis-slct-elbg-color);
    }
  }

  del::selection {
    color: var(--cyanosis-slct-del-color);
    background-color: var(--cyanosis-slct-elbg-color);
  }

  table {
    thead th {
      &::selection {
        background-color: transparent;
      }
    }
    tbody td {
      &::selection {
        background-color: var(--cyanosis-slct-bg-color);
      }
    }
  }

  code::selection {
    background-color: var(--cyanosis-slct-codebg-color);
  }

  pre {
    > code::selection {
      background-color: var(--cyanosis-slct-prebg-color);
    }
  }

  .contains-task-list {
    padding-left: 14px;
    list-style: none;

    input[type='checkbox'] {
      position: relative;

      &::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        width: inherit;
        height: inherit;
        background: #f0f8ff;
        border: 1px solid #add6ff;
        border-radius: 2px;
        box-sizing: border-box;
        z-index: 1;
      }

      &:checked {
        &::after {
          content: '\2713';
          position: absolute;
          top: -12px;
          left: 0;
          right: 0;
          bottom: 0;
          width: 0;
          height: 0;
          color: #ff5555;
          font-size: 20px;
          font-weight: bold;
          z-index: 2;
        }
      }
    }
  }

  // @media
  @media (max-width: 720px) {
    h1 {
      font-size: 24px;
    }

    h2 {
      font-size: 20px;
    }

    h3 {
      font-size: 18px;
    }
  }
}
